<!DOCTYPE html>
<html xmlns:th="http:www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout1}">
<head>
<meta charset="UTF-8">
<title>회원가입</title>
</head>
<body>
	<div layout:fragment="content">
		<form action="/member/join" role="form" method="post"
			th:object="${memberDto}">
			<div class="form-group">
				<label th:for="username">아이디</label> <input type="text"
					th:field="*{username}" class="form-control"
					placeholder="아이디 중복확인을 클릭하세요" disabled="disabled"
					style="width: 200px;" id="username">
				<button type="button" onClick="openPop()">아이디 중복확인</button>
				<p id="usernamecheckresult"></p>
			</div>
			<div class="form-group">
				<label th:for="password"> 비밀번호 </label> <input type="password"
					th:field="*{password}" class="form-control"
					placeholder="비밀번호를 입력하세요">
			</div>
			<div class="form-group">
				<div>회원 구분</div>
				<label th:for="sort"> 개인 </label> <input type="radio"
					th:field="*{sort}" value="individual"> <label th:for="sort">
					기업 </label> <input type="radio" th:field="*{sort}" value="company">
			</div>
			<div class="form-group">
				<label th:for="name"> 이름 </label> <input type="text"
					th:field="*{name}" class="form-control" placeholder="이름을 입력하세요">
			</div>
			<div class="form-group">
				<label th:for="phone"> 연락처 </label> <input type="text"
					class="form-control" th:field="*{phone}" placeholder="전화번호를 입력하세요">
			</div>
			<div class="form-group">
				<label th:for="email"> 이메일 </label> <input type="text"
					th:field="*{email}" class="form-control" placeholder="이메일을 입력하세요">
			</div>
			<div class="form-group">
				<label th:for="birthday"> 생년월일 </label> <input type="date"
					th:field="*{birthday}" class="form-control">
			</div>
			<div class="form-group">
				<label th:for="address"> 주소 </label> <input type="text"
					th:field="*{address}" class="form-control" placeholder="주소를 입력하세요">
			</div>
			<button type="submit">회원가입</button>
			<button>돌아가기</button>

			<!-- csrf 공격 방어하기 위한 csrf 토큰값이 있어야 함. csrf 토큰이란 실제 서버에서 요청한 것이 맞는지 확인 -->
			<!-- <input type="hidden" th:name="${_csrf.parameterName}"
				th:value="&{_csrf.token}">  -->
		</form>
	</div>
</body>
</html>

<th:block layout:fragment="script">
	<script th:inline="javascript">
		function openPop() {
			window.open("/member/usernamecheck", "usernameVal",
					"width=350px, height=30px");
		};

		window.onload = function(){
			
			document.getElementById("username").value=localStorage.getItem('username');
				console.log(localStorage.getItem('username'));
			
		}
		
	</script>

</th:block>