<!DOCTYPE html>
<html xmlns:th="http:www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout1}"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<head>
<meta charset="UTF-8">
<title>마이페이지 - 회원 정보 조회</title>
</head>
<script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
<body>
	<div th:fragment="content" id="accountinfo">
		<label>아이디</label> <input type="text" th:name="username" id="username"
			readonly> <label>계정 구분</label> <input type="text"
			th:name="sort" id="sort" readonly> <label>회원 이름</label> <input
			type="text" th:name="name" id="name" readonly> <label>회원
			전화번호</label> <input type="text" th:name="phone" id="phone" readonly>
		<label>이메일</label> <input type="text" th:name="email" id="email"
			readonly> <label>생년월일</label> <input type="text"
			th:name="birthday" id="birthday" readonly> <label>주소</label>
		<input type="text" th:name="address" id="address" readonly> <label>가입일</label>
		<input type="text" th:name="registerdate" id="registerdate" readonly>
	</div>
</body>
</html>
<th:block layout:fragment="script">
	<script th:inline="javascript">
		
	window.onload = function() {

		$.ajax({
			type: 'get',
			url: '/mypage/sendMemberData',
			dataType: 'json',
			success: function(member){
				console.log('result : ' + member);
				console.log(member.username);
				
				document.getElementById("username").value = member.username;
				if(member.sort == "individual"){
					document.getElementById("sort").value = "개인";
				} else if(member.sort == "company") {
					document.getElementById("sort").value = "기업";
				}
				
				document.getElementById("name").value = member.name;
				document.getElementById("phone").value = member.phone;
				document.getElementById("email").value = member.email;
				document.getElementById("birthday").value = member.birthday;
				document.getElementById("address").value = member.address;
				document.getElementById("registerdate").value = member.registerdate;
			},
			error: function(request, status, error){
				console.log('request : ' + request);
				console.log('status : ' + status);
				console.log('error : ' + error);
			}
		})
		
	}
	</script>
</th:block>